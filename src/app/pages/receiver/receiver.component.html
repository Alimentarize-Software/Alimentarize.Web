<!-- Modal de Sucesso -->
<div id="successModal" class="modal" *ngIf="showSuccessModal">
  <div class="modal-content">
    <h2>Agendamento</h2>
    <p>Você deseja aceitar a doação do {{ currentDonation.donor.name }}?</p>
    <p class="success">
      Ao aceitar esta doação, você não poderá realizar outra ação.
    </p>
    <div class="modal-actions">
      <button class="back-btn" (click)="closeSuccessModal()">Voltar</button>
      <button class="accept-btn" (click)="acceptDonation()">Aceitar</button>
    </div>
  </div>
</div>

<!-- Modal Warning -->
<div id="cancelDonationModal" class="modal" *ngIf="showModal">
  <div class="modal-content">
    <h2>Agendamento</h2>
    <p>
      Tem certeza que deseja cancelar a doação do
      {{ currentDonation.donor.name }}?
    </p>
    <p class="warning">
      Ao cancelar esta doação, você não poderá realizar outra ação.
    </p>
    <div class="modal-actions">
      <button class="back-btn" (click)="closeModal()">Voltar</button>
      <button class="cancel-btn" (click)="cancelDonation()">
        Cancelar doação
      </button>
    </div>
  </div>
</div>

<div class="main">
  <h3>Histórico de doações</h3>
  <div class="tabs">
    <div class="tab" (click)="handleTabClick($event)">Histórico</div>
    <div class="tab" (click)="handleTabClick($event)">Agendamentos</div>
    <div class="border"></div>
  </div>
  <div class="box-table">
    <app-table
      [data]="getData()"
      [loadingData]="loading"
      (donationModal)="handleAction($event)"
      (pageChange)="onPageChange($event)"
      [currentPage]="getCurrentPage()"
      [totalPages]="getTotalPages()"
      [scheduling]="isScheduling"
    ></app-table>
  </div>
  <div class="filter-subtitles">
    <div class="subtitles">
      <p>Legenda</p>
      <div class="subtitles-options">
        <div class="subtitles-option">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#A9320C"
          >
            <path
              d="M480-280q83 0 141.5-58.5T680-480q0-83-58.5-141.5T480-680q-83 0-141.5 58.5T280-480q0 83 58.5 141.5T480-280Zm0 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
            />
          </svg>
          <label for="option1">Recusado</label>
        </div>
        <div class="subtitles-option">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24px"
            viewBox="0 -960 960 960"
            width="24px"
            fill="#4CAF50"
          >
            <path
              d="M480-280q83 0 141.5-58.5T680-480q0-83-58.5-141.5T480-680q-83 0-141.5 58.5T280-480q0 83 58.5 141.5T480-280Zm0 200q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q134 0 227-93t93-227q0-134-93-227t-227-93q-134 0-227 93t-93 227q0 134 93 227t227 93Zm0-320Z"
            />
          </svg>
          <label for="option1">Aprovado</label>
        </div>
      </div>
    </div>
  </div>
</div>
